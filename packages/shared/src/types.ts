// ============================================
// ğŸ“– TypeScript å­¦ä¹ ç¬”è®°ï¼šæ¥å£ï¼ˆInterfaceï¼‰
// ============================================
// æ¥å£æ˜¯ TypeScript æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ã€‚
// å®ƒå®šä¹‰äº†ä¸€ä¸ª"æ•°æ®çš„å½¢çŠ¶"ï¼Œå‘Šè¯‰ TS æŸä¸ªå¯¹è±¡åº”è¯¥é•¿ä»€ä¹ˆæ ·ã€‚
// åœ¨å…¨æ ˆé¡¹ç›®ä¸­ï¼Œå‰åç«¯å…±äº«æ¥å£å®šä¹‰ï¼Œç¡®ä¿æ•°æ®ç±»å‹ä¸€è‡´ã€‚

/**
 * ä¹¦ç­¾ï¼ˆBookmarkï¼‰- æ ¸å¿ƒæ•°æ®æ¨¡å‹
 *
 * ğŸ“– å­¦ä¹ ç‚¹ï¼š
 * - `interface` å®šä¹‰å¯¹è±¡çš„ç±»å‹ç»“æ„
 * - `?` è¡¨ç¤ºå¯é€‰å±æ€§ï¼ˆoptional propertyï¼‰
 * - æ¯ä¸ªå±æ€§éƒ½æœ‰æ˜ç¡®çš„ç±»å‹æ³¨è§£
 */
export interface Bookmark {
    id: number;
    title: string;
    url: string;
    description?: string; // å¯é€‰å±æ€§ï¼šæè¿°å¯ä»¥ä¸å¡«
    favicon?: string; // å¯é€‰å±æ€§ï¼šç½‘ç«™å›¾æ ‡ URL
    createdAt: string; // ISO æ—¥æœŸå­—ç¬¦ä¸²
    updatedAt: string;
}

/**
 * æ ‡ç­¾ï¼ˆTagï¼‰- ç”¨äºåˆ†ç±»ä¹¦ç­¾
 */
export interface Tag {
    id: number;
    name: string;
    color?: string; // å¯é€‰çš„æ ‡ç­¾é¢œè‰²
}

/**
 * ä¹¦ç­¾ä¸æ ‡ç­¾çš„å…³è”
 *
 * ğŸ“– å­¦ä¹ ç‚¹ï¼š
 * - é€šè¿‡å¼•ç”¨å…¶ä»–æ¥å£çš„å±æ€§ç±»å‹æ¥ä¿æŒä¸€è‡´æ€§
 * - è¿™é‡Œç”¨ Bookmark['id'] è€Œä¸æ˜¯ç›´æ¥å†™ numberï¼Œ
 *   å¦‚æœ Bookmark.id ç±»å‹å˜äº†ï¼Œè¿™é‡Œä¼šè‡ªåŠ¨åŒæ­¥
 */
export interface BookmarkTag {
    bookmarkId: Bookmark["id"];
    tagId: Tag["id"];
}

// ============================================
// ğŸ“– TypeScript å­¦ä¹ ç¬”è®°ï¼šç±»å‹åˆ«åï¼ˆType Aliasï¼‰
// ============================================
// `type` å…³é”®å­—å¯ä»¥å®šä¹‰ç±»å‹åˆ«åã€‚
// å’Œ interface ä¸åŒçš„æ˜¯ï¼Œtype å¯ä»¥è¡¨ç¤ºè”åˆç±»å‹ã€äº¤å‰ç±»å‹ç­‰æ›´å¤æ‚çš„ç±»å‹ã€‚

/**
 * åˆ›å»ºä¹¦ç­¾æ—¶çš„è¯·æ±‚æ•°æ®
 *
 * ğŸ“– å­¦ä¹ ç‚¹ï¼š
 * - `Omit<T, K>` æ˜¯å†…ç½®çš„å·¥å…·ç±»å‹ï¼ˆUtility Typeï¼‰
 * - å®ƒè¡¨ç¤º"ä»ç±»å‹ T ä¸­å»æ‰å±æ€§ K"
 * - åˆ›å»ºæ—¶ä¸éœ€è¦ id å’Œæ—¶é—´æˆ³ï¼ˆç”±åç«¯è‡ªåŠ¨ç”Ÿæˆï¼‰ï¼Œæ‰€ä»¥æ’é™¤æ‰
 */
export type CreateBookmarkRequest = Omit<
    Bookmark,
    "id" | "createdAt" | "updatedAt"
> & {
    tagIds?: number[]; // å¯é€‰ï¼šåˆ›å»ºæ—¶åŒæ—¶å…³è”æ ‡ç­¾
};

/**
 * æ›´æ–°ä¹¦ç­¾æ—¶çš„è¯·æ±‚æ•°æ®
 *
 * ğŸ“– å­¦ä¹ ç‚¹ï¼š
 * - `Partial<T>` ä¹Ÿæ˜¯å†…ç½®å·¥å…·ç±»å‹
 * - å®ƒæŠŠ T çš„æ‰€æœ‰å±æ€§éƒ½å˜æˆå¯é€‰çš„
 * - æ›´æ–°æ—¶åªéœ€è¦ä¼ æƒ³ä¿®æ”¹çš„å­—æ®µ
 */
export type UpdateBookmarkRequest = Partial<CreateBookmarkRequest>;

/**
 * å¸¦æ ‡ç­¾ä¿¡æ¯çš„ä¹¦ç­¾ï¼ˆåˆ—è¡¨å±•ç¤ºç”¨ï¼‰
 *
 * ğŸ“– å­¦ä¹ ç‚¹ï¼š
 * - `&` æ˜¯äº¤å‰ç±»å‹ï¼ˆIntersection Typeï¼‰
 * - å®ƒæŠŠä¸¤ä¸ªç±»å‹åˆå¹¶æˆä¸€ä¸ªï¼ŒåŒæ—¶æ‹¥æœ‰ä¸¤è€…çš„æ‰€æœ‰å±æ€§
 */
export type BookmarkWithTags = Bookmark & {
    tags: Tag[];
};

// ============================================
// ğŸ“– TypeScript å­¦ä¹ ç¬”è®°ï¼šæ³›å‹ï¼ˆGenericsï¼‰
// ============================================
// æ³›å‹è®©ä½ å†™å‡ºå¯ä»¥é€‚ç”¨äºå¤šç§ç±»å‹çš„ä»£ç ã€‚
// ä¸‹é¢çš„ ApiResponse<T> ä¸­çš„ T å°±æ˜¯æ³›å‹å‚æ•°ï¼Œ
// è°ƒç”¨æ—¶å¯ä»¥ä¼ å…¥ä¸åŒçš„ç±»å‹ã€‚

/**
 * API å“åº”çš„ç»Ÿä¸€æ ¼å¼
 *
 * ğŸ“– å­¦ä¹ ç‚¹ï¼š
 * - `<T>` æ˜¯æ³›å‹å‚æ•°ï¼ŒT ä»£è¡¨"æŸç§ç±»å‹"
 * - ä½¿ç”¨æ—¶ï¼šApiResponse<Bookmark> è¡¨ç¤º data æ˜¯ Bookmark ç±»å‹
 * - ä½¿ç”¨æ—¶ï¼šApiResponse<Bookmark[]> è¡¨ç¤º data æ˜¯ Bookmark æ•°ç»„
 */
export interface ApiResponse<T> {
    success: boolean;
    data: T;
    message?: string;
}

/**
 * API é”™è¯¯å“åº”
 */
export interface ApiErrorResponse {
    success: false; // å­—é¢é‡ç±»å‹ï¼šsuccess åªèƒ½æ˜¯ false
    error: string;
    message: string;
}
